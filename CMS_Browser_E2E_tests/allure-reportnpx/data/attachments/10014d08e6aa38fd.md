# Test info

- Name: Installer Customers menu >> should add a new customer
- Location: C:\Users\Daly\OneDrive - ESPRIT\Documents\Stage PFE\CMS_Browser_E2E_tests\tests\installer\installer-menutests.spec.ts:18:7

# Error details

```
Error: locator.click: Test timeout of 50000ms exceeded.
Call log:
  - waiting for getByRole('button', { name: 'Submit' })
    - locator resolved to <button disabled tabindex="-1" type="button" class="MuiButtonBase-root MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeMedium MuiButton-containedSizeMedium Mui-disabled MuiButton-root MuiButton-contained MuiButton-containedPrimary MuiButton-sizeMedium MuiButton-containedSizeMedium css-125glv0">Submit</button>
  - attempting click action
    2 × waiting for element to be visible, enabled and stable
      - element is not enabled
    - retrying click action
    - waiting 20ms
    2 × waiting for element to be visible, enabled and stable
      - element is not enabled
    - retrying click action
      - waiting 100ms
    83 × waiting for element to be visible, enabled and stable
       - element is not enabled
     - retrying click action
       - waiting 500ms

    at C:\Users\Daly\OneDrive - ESPRIT\Documents\Stage PFE\CMS_Browser_E2E_tests\tests\installer\installer-menutests.spec.ts:27:56
```

# Page snapshot

```yaml
- dialog:
  - button
  - heading "Add new customer" [level=5]
  - text: First Name
  - textbox "First Name": aminesmatq
  - text: Last Name
  - textbox "Last Name": mejri8hofd
  - text: Email
  - textbox "Email": aminesmatq.mejri8hofd@gmail.com
  - text: Country
  - button "Country": Tunisia
  - text: Phone Number (optional)
  - img "Tunisia"
  - textbox "Phone Number (optional)"
  - button "Submit" [disabled]
  - button "Close"
- button "Open Intercom Messenger":
  - img
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 |
   3 | test.describe('Installer Customers menu', () => {
   4 |   test.use({ storageState: 'auth.json' });
   5 |
   6 |   test.beforeEach(async ({ page }) => {
   7 |     await page.goto('https://dashboard.cam2drive-bt.com/customers/');
   8 |   });
   9 |
  10 |   function randomString(length = 5) {
  11 |     return Math.random().toString(36).substring(2, 2 + length);
  12 |   }
  13 |
  14 |   function randomName(base = 'ahmed aziz') {
  15 |     return `${base}-${Math.random().toString(36).substring(2, 6)}`;
  16 |   }
  17 |
  18 |   test('should add a new customer', async ({ page }) => {
  19 |     const firstName = `amine${randomString()}`;
  20 |     const lastName = `mejri${randomString()}`;
  21 |     const email = `${firstName}.${lastName}@gmail.com`;
  22 |
  23 |     await page.getByRole('button', { name: 'Add Customer' }).click();
  24 |     await page.getByRole('textbox', { name: 'First Name' }).fill(firstName);
  25 |     await page.getByRole('textbox', { name: 'Last Name' }).fill(lastName);
  26 |     await page.getByRole('textbox', { name: 'Email' }).fill(email);
> 27 |     await page.getByRole('button', { name: 'Submit' }).click();
     |                                                        ^ Error: locator.click: Test timeout of 50000ms exceeded.
  28 |   await expect(page.getByText('customer created successfully')).toBeVisible();
  29 |   });
  30 |
  31 |   test('should edit a customer', async ({ page }) => {
  32 |     const newName = randomName();
  33 |
  34 |     await page.getByRole('button', { name: 'Edit' }).first().click();
  35 |     await expect(page.getByRole('tab', { name: 'Customer Infos' })).toBeVisible();
  36 |     await page.getByRole('textbox').first().fill(newName);
  37 |     await page.getByRole('button', { name: 'Save' }).click();
  38 |     await expect(page.getByText('customer updated successfully')).toBeVisible();
  39 |   });
  40 | });
```