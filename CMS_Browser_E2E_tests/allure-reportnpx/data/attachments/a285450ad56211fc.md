# Test info

- Name: Distributor user&roles tests >> should add a new user
- Location: C:\Users\Daly\OneDrive - ESPRIT\Documents\Stage PFE\CMS_Browser_E2E_tests\tests\distributor\distributor-user&rolestest.spec.ts:10:7

# Error details

```
Error: browserType.launch: Executable doesn't exist at C:\Users\Daly\AppData\Local\ms-playwright\chromium_headless_shell-1169\chrome-win\headless_shell.exe
╔═════════════════════════════════════════════════════════════════════════╗
║ Looks like Playwright Test or Playwright was just installed or updated. ║
║ Please run the following command to download new browsers:              ║
║                                                                         ║
║     npx playwright install                                              ║
║                                                                         ║
║ <3 Playwright Team                                                      ║
╚═════════════════════════════════════════════════════════════════════════╝
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 |
   3 | test.describe('Distributor user&roles tests', () => {
   4 |   test.use({ storageState: 'authd.json' });
   5 |
   6 |   test.beforeEach(async ({ page }) => {
   7 |     await page.goto('https://dashboard.cam2drive-bt.com/team/');
   8 |   });
   9 |
> 10 |   test('should add a new user', async ({ page }) => {
     |       ^ Error: browserType.launch: Executable doesn't exist at C:\Users\Daly\AppData\Local\ms-playwright\chromium_headless_shell-1169\chrome-win\headless_shell.exe
  11 |     const randomString = Math.random().toString(36).substring(2, 7);
  12 |     const email = `user${randomString}@test.com`;
  13 |
  14 |     await expect(page.getByRole('tab', { name: 'Users' })).toBeVisible();
  15 |     await page.getByRole('button', { name: 'Add User' }).click();
  16 |     await page.getByRole('textbox', { name: 'Email' }).fill(email);
  17 |     await page.getByRole('button').first().click();
  18 |     await page.getByRole('option', { name: 'Admin' }).click();
  19 |     await page.getByRole('button', { name: 'Submit' }).click();
  20 |     await expect(page.getByText('User created successfully')).toBeVisible();
  21 |   });
  22 |
  23 |   test('should edit a user role', async ({ page }) => {
  24 |     await page.getByRole('link', { name: 'Users & Roles' }).click();
  25 |     await page.hover('button:has-text("Edit")');
  26 |     await page.getByRole('button', { name: 'Edit' }).click();
  27 |
  28 |     const currentRole = await page.getByRole('button', { name: /Admin|Technician|Viewer/i }).textContent();
  29 |     await page.getByRole('button', { name: /Admin|Technician|Viewer/i }).click();
  30 |
  31 |     const roles = ['Admin', 'Technician', 'Viewer'];
  32 |     const newRole = roles.find(role => !currentRole?.includes(role))!;
  33 |
  34 |     await page.getByRole('option', { name: newRole }).click();
  35 |     await page.getByRole('button', { name: 'Submit' }).click();
  36 |     await expect(page.getByText('User updated successfully')).toBeVisible();
  37 |   });
  38 |
  39 |   test('should delete a user', async ({ page }) => {
  40 |     await page.getByRole('link', { name: 'Users & Roles' }).click();
  41 |     await page.hover('button:has-text("Delete")');
  42 |     await page.getByRole('button', { name: 'Delete' }).click();
  43 |     await expect(page.getByText('Do you really wish to')).toBeVisible();
  44 |     await page.getByRole('button', { name: 'delete' }).click();
  45 |     await expect(page.getByText('User deleted successfully')).toBeVisible();
  46 |   });
  47 | });
```