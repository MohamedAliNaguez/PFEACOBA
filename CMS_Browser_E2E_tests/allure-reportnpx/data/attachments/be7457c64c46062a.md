# Test info

- Name: Customer Device Management >> Add new device
- Location: C:\Users\Daly\OneDrive - ESPRIT\Documents\Stage PFE\CMS_Browser_E2E_tests\tests\cutomer\customer-devices-tests.spec.ts:25:7

# Error details

```
Error: expect(locator).toBeVisible()

Locator: getByText('dalynaguez@gmail.com')
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 300000ms
  - waiting for getByText('dalynaguez@gmail.com')

    at connectAsTestCustomer (C:\Users\Daly\OneDrive - ESPRIT\Documents\Stage PFE\CMS_Browser_E2E_tests\tests\cutomer\customer-devices-tests.spec.ts:11:76)
    at C:\Users\Daly\OneDrive - ESPRIT\Documents\Stage PFE\CMS_Browser_E2E_tests\tests\cutomer\customer-devices-tests.spec.ts:26:11
```

# Page snapshot

```yaml
- link:
  - /url: /
- button
- list:
  - listitem:
    - link "My Installers":
      - /url: /installers/
      - paragraph: My Installers
  - listitem:
    - separator:
      - paragraph: Settings
  - listitem:
    - link "Users & Roles":
      - /url: /team/
      - paragraph: Users & Roles
  - listitem:
    - separator:
      - paragraph: Account
  - listitem:
    - link "Preference":
      - /url: /
      - paragraph: Preference
  - listitem:
    - link "Change Password":
      - /url: /change-password/
      - paragraph: Change Password
  - listitem:
    - link "Logout":
      - /url: /
      - paragraph: Logout
- banner:
  - button
  - button
  - text: distributor
- main:
  - text: Installers
  - button "Add Installer"
  - text: Company
  - textbox "Company"
  - text: Email
  - textbox "Email"
  - grid:
    - rowgroup:
      - row "Name Email Country Phone Number Customers Actions":
        - columnheader "Name"
        - columnheader "Email"
        - columnheader "Country"
        - columnheader "Phone Number"
        - columnheader "Customers"
        - columnheader "Actions"
    - row "Company-rxwky userrxwky@test.com Tunisia +21685546866 0 Connect as Edit":
      - cell "Company-rxwky":
        - paragraph: Company-rxwky
      - cell "userrxwky@test.com":
        - paragraph: userrxwky@test.com
      - cell "Tunisia":
        - paragraph:
          - img "Tunisia"
          - text: Tunisia
      - cell "+21685546866":
        - paragraph: "+21685546866"
      - cell "0":
        - paragraph: "0"
      - cell "Connect as Edit":
        - button "Connect as"
        - button "Edit"
    - row "Company-tqfl1 usertqfl1@test.com Tunisia +21685935376 0 Connect as Edit":
      - cell "Company-tqfl1":
        - paragraph: Company-tqfl1
      - cell "usertqfl1@test.com":
        - paragraph: usertqfl1@test.com
      - cell "Tunisia":
        - paragraph:
          - img "Tunisia"
          - text: Tunisia
      - cell "+21685935376":
        - paragraph: "+21685935376"
      - cell "0":
        - paragraph: "0"
      - cell "Connect as Edit":
        - button "Connect as"
        - button "Edit"
    - row "Company-y6cp7 usery6cp7@test.com Tunisia +21633596789 0 Connect as Edit":
      - cell "Company-y6cp7":
        - paragraph: Company-y6cp7
      - cell "usery6cp7@test.com":
        - paragraph: usery6cp7@test.com
      - cell "Tunisia":
        - paragraph:
          - img "Tunisia"
          - text: Tunisia
      - cell "+21633596789":
        - paragraph: "+21633596789"
      - cell "0":
        - paragraph: "0"
      - cell "Connect as Edit":
        - button "Connect as"
        - button "Edit"
    - row "Company-yz5uv useryz5uv@test.com Tunisia +21624430139 0 Connect as Edit":
      - cell "Company-yz5uv":
        - paragraph: Company-yz5uv
      - cell "useryz5uv@test.com":
        - paragraph: useryz5uv@test.com
      - cell "Tunisia":
        - paragraph:
          - img "Tunisia"
          - text: Tunisia
      - cell "+21624430139":
        - paragraph: "+21624430139"
      - cell "0":
        - paragraph: "0"
      - cell "Connect as Edit":
        - button "Connect as"
        - button "Edit"
    - row "Company-zk4lu userzk4lu@test.com Tunisia +21684838826 0 Connect as Edit":
      - cell "Company-zk4lu":
        - paragraph: Company-zk4lu
      - cell "userzk4lu@test.com":
        - paragraph: userzk4lu@test.com
      - cell "Tunisia":
        - paragraph:
          - img "Tunisia"
          - text: Tunisia
      - cell "+21684838826":
        - paragraph: "+21684838826"
      - cell "0":
        - paragraph: "0"
      - cell "Connect as Edit":
        - button "Connect as"
        - button "Edit"
    - row "Company-zugin userzugin@test.com Tunisia +21675039730 0 Connect as Edit":
      - cell "Company-zugin":
        - paragraph: Company-zugin
      - cell "userzugin@test.com":
        - paragraph: userzugin@test.com
      - cell "Tunisia":
        - paragraph:
          - img "Tunisia"
          - text: Tunisia
      - cell "+21675039730":
        - paragraph: "+21675039730"
      - cell "0":
        - paragraph: "0"
      - cell "Connect as Edit":
        - button "Connect as"
        - button "Edit"
    - row "DrnKQxz7D7 usera7zn5@test.com Tunisia +21682685867 0 Connect as Edit":
      - cell "DrnKQxz7D7":
        - paragraph: DrnKQxz7D7
      - cell "usera7zn5@test.com":
        - paragraph: usera7zn5@test.com
      - cell "Tunisia":
        - paragraph:
          - img "Tunisia"
          - text: Tunisia
      - cell "+21682685867":
        - paragraph: "+21682685867"
      - cell "0":
        - paragraph: "0"
      - cell "Connect as Edit":
        - button "Connect as"
        - button "Edit"
    - row "e6yaUli6wS userctfaz@test.com Tunisia +21620192169 0 Connect as Edit":
      - cell "e6yaUli6wS":
        - paragraph: e6yaUli6wS
      - cell "userctfaz@test.com":
        - paragraph: userctfaz@test.com
      - cell "Tunisia":
        - paragraph:
          - img "Tunisia"
          - text: Tunisia
      - cell "+21620192169":
        - paragraph: "+21620192169"
      - cell "0":
        - paragraph: "0"
      - cell "Connect as Edit":
        - button "Connect as"
        - button "Edit"
    - row "e8xk7IuTRv userr5npv@test.com Tunisia +21697190560 0 Connect as Edit":
      - cell "e8xk7IuTRv":
        - paragraph: e8xk7IuTRv
      - cell "userr5npv@test.com":
        - paragraph: userr5npv@test.com
      - cell "Tunisia":
        - paragraph:
          - img "Tunisia"
          - text: Tunisia
      - cell "+21697190560":
        - paragraph: "+21697190560"
      - cell "0":
        - paragraph: "0"
      - cell "Connect as Edit":
        - button "Connect as"
        - button "Edit"
    - row "edHfS2Tjc0 userp34hh@test.com Tunisia +21690351740 0 Connect as Edit":
      - cell "edHfS2Tjc0":
        - paragraph: edHfS2Tjc0
      - cell "userp34hh@test.com":
        - paragraph: userp34hh@test.com
      - cell "Tunisia":
        - paragraph:
          - img "Tunisia"
          - text: Tunisia
      - cell "+21690351740":
        - paragraph: "+21690351740"
      - cell "0":
        - paragraph: "0"
      - cell "Connect as Edit":
        - button "Connect as"
        - button "Edit"
    - paragraph: "Rows per page:"
    - 'button "Rows per page: 10"': "10"
    - paragraph: 1-10 of 10
    - button "Go to previous page" [disabled]
    - button "Go to next page" [disabled]
- contentinfo:
  - paragraph:
    - text: Â© 2025, Made by
    - link "Acoba":
      - /url: https://www.acoba.com/
  - paragraph: v 1.1.0
- alert: Cam2Drive Dashboard
- button "Open Intercom Messenger":
  - img
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 |
   3 | test.describe('Customer Device Management', () => {
   4 |   test.use({ storageState: 'authd.json' });
   5 |
   6 |   test.beforeEach(async ({ page }) => {
   7 |     await page.goto('https://dashboard.cam2drive-bt.com/devices/');
   8 |   });
   9 |
  10 |   async function connectAsTestCustomer(page) {
> 11 |     await expect(page.getByText('dalynaguez@gmail.com', { exact: false })).toBeVisible({ timeout: 300000 });
     |                                                                            ^ Error: expect(locator).toBeVisible()
  12 | await page.getByRole('row')
  13 |   .filter({ hasText: 'dalynaguez@gmail.com' })
  14 |   .getByRole('button')
  15 |   .first()
  16 |   .click();
  17 |       await expect(page.getByRole('link', { name: 'My Customers' })).toBeVisible();
  18 |       await page.getByRole('textbox', { name: 'Email' }).click();
  19 |   await page.getByRole('textbox', { name: 'Email' }).fill('tes');
  20 |     await expect(page.getByText('Test-Customer test')).toBeVisible();
  21 |     await page.getByRole('row', { name: /Test-Customer test/ }).getByRole('button', { name: 'Connect as' }).click();
  22 |     await expect(page.getByText('Detections')).toBeVisible();
  23 |   }
  24 |
  25 |   test('Add new device', async ({ page }) => {
  26 |     await connectAsTestCustomer(page);
  27 |     await page.getByRole('link', { name: 'My Devices' }).click();
  28 |     await expect(page.getByRole('button', { name: 'Add device' })).toBeVisible();
  29 |     await page.getByRole('button', { name: 'Add device' }).click();
  30 |     await page.getByText('Swift Minimalist Device Setup').click();
  31 |     await page.getByRole('textbox', { name: 'Device Name' }).fill('dev-test');
  32 |     await page.getByRole('button', { name: 'Manufacturer' }).click();
  33 |     await page.getByRole('option', { name: 'Dahua' }).click();
  34 |     await page.getByRole('button', { name: 'Site' }).click();
  35 |     await page.getByRole('option').nth(1).click({ force: true });
  36 |     await page.getByRole('button', { name: 'Device Type' }).click();
  37 |     await page.getByRole('option', { name: 'DVR' }).click();
  38 |     await page.getByRole('textbox', { name: 'Number of Channels' }).fill('8');
  39 |     await page.getByRole('button', { name: 'Submit' }).click();
  40 |     await expect(page.getByText('Congratulations ! Your Device')).toBeVisible();
  41 |     await page.locator('div').filter({ hasText: 'Congratulations ! Your Device' }).nth(1).click();
  42 |   });
  43 |
  44 |   test('Delete device', async ({ page }) => {
  45 |     await connectAsTestCustomer(page);
  46 |     await page.getByRole('link', { name: 'My Devices' }).click();
  47 |     await expect(page.getByRole('button', { name: 'Add device' })).toBeVisible();
  48 |     await page.hover('button:has-text("Delete")');
  49 |     await page.getByRole('button', { name: 'Delete' }).click();
  50 |     await expect(page.getByText('Are you sure you want to')).toBeVisible();
  51 |     await page.getByRole('button', { name: 'Delete' }).click();
  52 |     await expect(page.getByText('Device deleted successfully')).toBeVisible();
  53 |   });
  54 | });
```